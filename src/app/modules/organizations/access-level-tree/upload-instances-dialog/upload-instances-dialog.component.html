<div class="relative flex h-full w-full flex-col">
  <div class="flex flex-auto flex-col items-center p-8 pb-6 sm:flex-row sm:items-start">
    <div
      class="flex h-10 w-10 flex-0 items-center justify-center rounded-full bg-primary-100 text-primary-600 sm:mr-4 dark:bg-primary-600 dark:text-primary-50"
    >
      <mat-icon class="text-current icon-size-5" svgIcon="fa-solid:arrow-up-from-bracket"></mat-icon>
    </div>

    <div class="mt-4 flex w-full flex-col items-center space-y-3 text-left sm:mt-0 sm:items-start sm:pr-8">
      <div class="text-xl font-medium leading-6">Upload Access Level Instances</div>
      <div class="text-secondary">
        Upload your Organizational Structure in spreadsheet form. The file should include a column for each access level with its column
        header equal to the custom access level name. Each row should contain an access level instance, with its ancestry fully defined
        (parent node name, grand-parent node name, etc.)
      </div>
      <div class="flex w-full items-center rounded-full border border-gray-300 dark:border-gray-600">
        <input
          id="instances-file-input"
          class="pointer-events-none invisible absolute h-0 w-0 opacity-0"
          type="file"
          [multiple]="false"
          [accept]="allowedTypes"
          (change)="selectFile(instancesFileInput.files)"
          #instancesFileInput
        />
        <button
          mat-flat-button
          class="flex items-center gap-x-2"
          color="primary"
          (click)="instancesFileInput.click()"
          [disabled]="submitted"
        >
          <mat-icon svgIcon="fa-solid:file-csv" class="text-white icon-size-5"></mat-icon>
          <span>Choose file</span>
        </button>
        <div class="text-secondary max-w-[21rem] cursor-default items-center truncate pl-3 pr-2">
          {{ file?.name ?? 'No file selected' }}
        </div>
      </div>
      @if (isExcelFile()) {
        <div class="text-secondary text-sm"><strong>Note</strong>: only the first sheet of multi-sheet Excel files will be imported.</div>
      }
    </div>
  </div>

  <div class="flex items-center justify-center space-x-3 bg-gray-50 px-6 py-4 sm:justify-end dark:bg-black dark:bg-opacity-10">
    <button mat-stroked-button matDialogClose="canceled" class="w-24" [disabled]="submitted">Cancel</button>
    <button
      mat-flat-button
      class="flex w-24 items-center justify-center"
      color="primary"
      (click)="upload()"
      [disabled]="submitted || !file"
    >
      @if (!submitted) {
        Upload
      } @else {
        <mat-progress-spinner [diameter]="24" mode="indeterminate"></mat-progress-spinner>
      }
    </button>
  </div>
</div>
