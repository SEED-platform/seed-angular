<form [formGroup]="form">
  
  <!-- Select Dataset -->
  <mat-form-field hideRequiredMarker class="w-full">
    <mat-label class="text-secondary">Data Set</mat-label>
    <mat-select formControlName="dataset" placeholder="(no datasets)">
      @for (dataset of data.datasets; track $index) {
      <mat-option [value]="dataset">{{ dataset.name }}</mat-option>
      }
    </mat-select>
  </mat-form-field>

  <!-- Select Data XML -->
  <div class="text-secondary my-4">Accepted File Types: .xml</div>

  <div class="flex w-full items-center rounded-full border border-gray-300 dark:border-gray-600">
    <input 
      class="pointer-events-none invisible absolute h-0 w-0 opacity-0"
      id="file-input"
      #fileInput
      [multiple]="false"
      [accept]="allowedTypes"
      (change)="onSelectFile(fileInput.files)"
      type="file" />

    <button class="flex items-center gap-x-2" (click)="fileInput.click()" mat-flat-button color="primary">
      <mat-icon class="text-white icon-size-5" svgIcon="fa-solid:file"></mat-icon>
      <span>Choose file</span>
    </button>
    <div class="text-secondary max-w-[21rem] cursor-default items-center truncate pl-3 pr-2">
      {{ file?.name ?? 'No file selected' }}
    </div>
  </div>

  <div class="flex justify-end mt-4">
    <button 
      type="submit" 
      [disabled]="form.invalid"
      (click)="onSubmit()" 
      mat-raised-button 
      matStepperNext
      color="primary">Next</button>
  </div>
</form>