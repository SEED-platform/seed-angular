<div class="flex flex-col gap-4">
  <!-- CYCLE -->
  <div class="flex gap-4 border-bottom rounded-lg">
    <div class="text-secondary font-bold text">Cycle:</div>
    <div class="">{{ cycle?.name }}</div>
  </div>
  <mat-divider></mat-divider>
  <!-- PROFILE -->
  <div class="flex gap-4 border-bottom rounded-lg">
    <div class="text-secondary font-bold text">Column Profile:</div>
    <mat-select        
      class="h-10 w-60 rounded border border-gray-500 p-3 text-sm"
      [(value)]="profile"
      placeholder="No Profile Selected"
      >
      <mat-option [value]="null"></mat-option>
      @for (profile of columnMappingProfiles; track profile.id) {
      <mat-option [value]="profile">{{ profile.name }}</mat-option>
      }
    </mat-select>
    <a class="flex" 
      mat-stroked-button
      [disabled]="!profile" 
      matTooltip="Apply Profile"
      (click)="applyProfile()"
      >
      <mat-icon class="fill-primary-700 icon-size-4" svgIcon="fa-solid:check"></mat-icon>
    </a>
    <a class="flex" mat-stroked-button matTooltip="Create New Profile">
      <mat-icon class="fill-primary-700 icon-size-4" svgIcon="fa-solid:plus"></mat-icon>
    </a>
  </div>

</div>

<!-- GRID CONTROLS -->
<mat-divider class="my-4"></mat-divider>
  <div class="flex flex-col gap-2 w-100">
    <button mat-stroked-button (click)="copyHeadersToSeed()" [disabled]="!rowData.length">Copy Data File Headers directly to SEED headers</button>
    <!-- <button mat-stroked-button>Toggle Omitted</button> -->
    <mat-button-toggle-group name="invntoryType" [(ngModel)]="defaultInventoryType" (change)="setAllInventoryType($event.value)" appearance="standard">
      <mat-button-toggle value="Property">Property Types</mat-button-toggle>
      <mat-button-toggle value="Tax Lot">Tax Lot Types</mat-button-toggle>
    </mat-button-toggle-group>
  </div>

<!-- GRID HEADER -->
<mat-divider class="my-5"></mat-divider>
<div class="flex justify-between items-center">
  <div class="flex gap-4 my-2 mx-3">
    <div class="w-10 h-5 bg-primary bg-opacity-25 rounded border"></div>
    <div class="italic text-secondary">Editable Cell</div>
  </div>

  <!-- errors -->
  <div>
    @if (errorMessages.length ) {
      <seed-alert type="error" showIcon="false" class="mb-4">
        <ul class="pl-4">
          @for (error of errorMessages; track $index) {
            <li class="list-disc">{{ error }}</li>
          }
        </ul>
      </seed-alert>
    }
  </div>

  <button class="mb-2" mat-raised-button color="primary" (click)="mapData()" [disabled]="!dataValid">Map Data</button>
</div>

<ag-grid-angular
  [rowData]="rowData"
  [columnDefs]="columnDefs"
  [gridOptions]="gridOptions"
  [theme]="gridTheme$ | async"
  [pagination]="true"
  [paginationPageSize]="20"
  [domLayout]="'autoHeight'"
  (gridReady)="onGridReady($event)"
>
</ag-grid-angular>