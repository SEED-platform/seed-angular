<div class="flex gap-4 border-bottom rounded-lg mx-2">
  <div class="text-secondary font-bold">Cycle:</div>
  <div class="">{{ cycle?.name }}</div>
</div>



<mat-divider class="my-5"></mat-divider>
<div class="flex justify-between items-center">
  <div class="flex gap-4 my-2 mx-3">
    <div class="w-10 h-5 bg-primary bg-opacity-25 rounded border"></div>
    <div class="italic text-secondary">Access Level Info</div>
  </div>

  <div class="flex gap-4">
    <button 
      (click)="showDataQualityResults()"
      [disabled]="!dqcComplete"
      mat-stroked-button
      [ngClass]="{ 'animate-pulse bg-gray-500': !dqcComplete }" 
    > Data Quality Results</button>
    <button 
      class="mb-2" 
      (click)="saveData()"
      color="primary" 
      [disabled]="loading"
      mat-raised-button 
      [ngClass]="{ 'animate-pulse bg-gray-500': loading }"
    >Save Data</button>
  </div>
</div>

@if (propertyResults.length) {
  <div class="ml-4 mb-4 flex font-medium">
    <mat-icon svgIcon="fa-solid:layer-group"></mat-icon>
    <span class="ml-4">Properties</span>
  </div>
  <ag-grid-angular
    [rowData]="propertyResults"
    [columnDefs]="propertyDefs"
    [theme]="gridTheme$ | async"
    [pagination]="true"
    [paginationPageSize]="20"
    [domLayout]="'autoHeight'" 
  >
</ag-grid-angular>
<mat-divider class="my-5"></mat-divider>
} 
@if (taxlotResults.length) {
  <div class="ml-4 mb-4 flex font-medium">
    <mat-icon svgIcon="fa-solid:layer-group"></mat-icon>
    <span class="ml-4">Tax Lots</span>
  </div>
  <ag-grid-angular
    [rowData]="taxlotResults"
    [columnDefs]="taxlotDefs"
    [theme]="gridTheme$ | async"
    [pagination]="true"
    [paginationPageSize]="20"
    [domLayout]="'autoHeight'" 
  >
  </ag-grid-angular>
}

@if (loading) {
  <div class="m-10">
    <div class="mb-5 flex items-center space-x-2">
      <mat-icon class="text-primary-600" svgIcon="fa-solid:hourglass-half"></mat-icon>
      <div class="text-secondary text-xl font-medium leading-6">Fetching Mapping Results...</div>
    </div>
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
  </div>

}