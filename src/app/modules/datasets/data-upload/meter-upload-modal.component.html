<seed-modal-header title="Upload Meter Data" titleIcon="fa-solid:bolt" [close]="close"></seed-modal-header>

<mat-stepper class="stepper-disable-hover" #stepper [linear]="true">
  <!-- STEP 1 -->
  <mat-step [completed]="completed[1]" label="File Select">
    <div class="m-10">
      <div class="text-secondary mb-4 ml-4">Accepted File Types: .csv, .xls, .xlsx</div>

      <div class="flex w-full items-center rounded-full border border-gray-300 dark:border-gray-600">
        <input 
          class="pointer-events-none invisible absolute h-0 w-0 opacity-0"
          id="file-input" 
          #fileInput
          [multiple]="false"
          [accept]="allowedTypes"
          (change)="step1(fileInput.files)"
          type="file" />
    
        <button class="flex items-center gap-x-2" (click)="fileInput.click()" mat-flat-button color="primary">
          <mat-icon class="text-white icon-size-5" svgIcon="fa-solid:file"></mat-icon>
          <span>Choose file</span>
        </button>
        <div class="text-secondary max-w-[21rem] cursor-default items-center truncate pl-3 pr-2">
          {{ file?.name ?? 'No file selected' }}
        </div>
      </div>

      <div class="text-secondary mt-5 ml-4">Note: only the first sheet of multi-sheet Excel files will be imported.</div>

    </div>
    
    @if (uploading) {
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    } @else {
      <div class="mt-10 flex justify-end">
        <button [disabled]="!completed[1] && !file" (click)="stepper.next()" mat-raised-button color="primary">Next</button>
      </div> 
    }
  </mat-step>
  <mat-step [completed]="completed[2]" label="Review">
    STEP 2
  </mat-step>
  <mat-step [completed]="completed[3]" label="Upload">
    STEP 3
  </mat-step>
  <mat-step [completed]="completed[2]" label="Review">
    STEP 4
  </mat-step>
</mat-stepper>